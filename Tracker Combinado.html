<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tracker Combinado</title>
  <link rel="stylesheet" href="styles.css">
  <script>
    window.Module = window.Module || {};
    if (!('arguments_' in Module)) Module.arguments_ = [];
    if (!('arguments' in Module)) Module.arguments = Module.arguments_;
    window.USE_CDN = false;
  </script>
  <script src="libs/hands.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js';window.USE_CDN=true;"></script>
  <script src="libs/face_mesh.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js';window.USE_CDN=true;"></script>
  <script src="libs/drawing_utils.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js';window.USE_CDN=true;"></script>
  <script src="libs/pose.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js';window.USE_CDN=true;"></script>
</head>
<body>
  <video id="video" autoplay muted playsinline></video>
  <canvas id="trackerCanvas"></canvas>
  <div id="captionContainer" class="caption-container"><div id="captionText"></div></div>
  <script type="module">
    import { initTracker } from './src/tracker.js';

    const video = document.getElementById('video');
    const canvas = document.getElementById('trackerCanvas');
    const captionContainer = document.getElementById('captionContainer');
    const captionText = document.getElementById('captionText');

    navigator.mediaDevices.getUserMedia({ video: true })
      .then(s => { video.srcObject = s; })
      .catch(err => alert('No se pudo acceder a la c√°mara: ' + err));

    const style = getComputedStyle(document.documentElement);
    const accent = style.getPropertyValue('--accent').trim() || '#2EB8A3';
    const accentRGB = style.getPropertyValue('--accent-rgb').trim() || '46,184,163';

    initTracker({
      video,
      canvas,
      captionContainer,
      captionText,
      accent,
      accentRGB
    });
  </script>
</body>
</html>
